
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Material Design 3 Light Theme - Proper Color Tokens */
    --md-sys-color-primary: 103 80 164; /* #6750a4 */
    --md-sys-color-on-primary: 255 255 255; /* #ffffff */
    --md-sys-color-primary-container: 234 221 255; /* #eaddff */
    --md-sys-color-on-primary-container: 33 0 93; /* #21005d */
    
    --md-sys-color-secondary: 98 91 113; /* #625b71 */
    --md-sys-color-on-secondary: 255 255 255; /* #ffffff */
    --md-sys-color-secondary-container: 231 222 248; /* #e7def8 */
    --md-sys-color-on-secondary-container: 30 25 43; /* #1e192b */
    
    --md-sys-color-tertiary: 125 82 96; /* #7d5260 */
    --md-sys-color-on-tertiary: 255 255 255; /* #ffffff */
    --md-sys-color-tertiary-container: 255 216 228; /* #ffd8e4 */
    --md-sys-color-on-tertiary-container: 55 11 30; /* #370b1e */
    
    --md-sys-color-error: 186 26 26; /* #ba1a1a */
    --md-sys-color-on-error: 255 255 255; /* #ffffff */
    --md-sys-color-error-container: 255 218 214; /* #ffdad6 */
    --md-sys-color-on-error-container: 65 0 2; /* #410002 */
    
    --md-sys-color-surface: 254 247 255; /* #fef7ff */
    --md-sys-color-on-surface: 29 27 32; /* #1d1b20 */
    --md-sys-color-surface-variant: 231 224 236; /* #e7e0ec */
    --md-sys-color-on-surface-variant: 73 69 78; /* #49454f */
    
    --md-sys-color-surface-container-lowest: 255 255 255; /* #ffffff */
    --md-sys-color-surface-container-low: 247 242 250; /* #f7f2fa */
    --md-sys-color-surface-container: 243 237 247; /* #f3edf7 */
    --md-sys-color-surface-container-high: 236 230 240; /* #ece6f0 */
    --md-sys-color-surface-container-highest: 230 224 233; /* #e6e0e9 */
    
    --md-sys-color-outline: 121 116 126; /* #79747e */
    --md-sys-color-outline-variant: 202 196 208; /* #cac4d0 */
    
    --md-sys-color-surface-tint: var(--md-sys-color-primary);
    --md-sys-color-inverse-surface: 50 47 53; /* #322f35 */
    --md-sys-color-inverse-on-surface: 245 239 247; /* #f5eff7 */
    --md-sys-color-inverse-primary: 208 188 255; /* #d0bcff */
    
    /* Legacy mappings for compatibility */
    --background: var(--md-sys-color-surface);
    --foreground: var(--md-sys-color-on-surface);
    --primary: var(--md-sys-color-primary);
    --primary-foreground: var(--md-sys-color-on-primary);
    --secondary: var(--md-sys-color-secondary);
    --secondary-foreground: var(--md-sys-color-on-secondary);
    --muted: var(--md-sys-color-surface-variant);
    --muted-foreground: var(--md-sys-color-on-surface-variant);
    --accent: var(--md-sys-color-secondary-container);
    --accent-foreground: var(--md-sys-color-on-secondary-container);
    --destructive: var(--md-sys-color-error);
    --destructive-foreground: var(--md-sys-color-on-error);
    --border: var(--md-sys-color-outline-variant);
    --outline-variant: var(--md-sys-color-outline-variant);
    --input: var(--md-sys-color-outline);
    --ring: var(--md-sys-color-primary);
    --surface-container: var(--md-sys-color-surface-container);
    --surface-container-high: var(--md-sys-color-surface-container-high);
    --on-surface: var(--md-sys-color-on-surface);
    --on-surface-variant: var(--md-sys-color-on-surface-variant);
    --primary-container: var(--md-sys-color-primary-container);
    --on-primary-container: var(--md-sys-color-on-primary-container);
    --secondary-container: var(--md-sys-color-secondary-container);
    --on-secondary-container: var(--md-sys-color-on-secondary-container);
    --card: var(--md-sys-color-surface-container);
    --card-foreground: var(--md-sys-color-on-surface);
    --popover: var(--md-sys-color-surface-container);
    --popover-foreground: var(--md-sys-color-on-surface);
    --radius: 12px;

    /* Sidebar colors */
    --sidebar-background: var(--md-sys-color-surface-container);
    --sidebar-foreground: var(--md-sys-color-on-surface);
    --sidebar-primary: var(--md-sys-color-primary);
    --sidebar-primary-foreground: var(--md-sys-color-on-primary);
    --sidebar-accent: var(--md-sys-color-secondary-container);
    --sidebar-accent-foreground: var(--md-sys-color-on-secondary-container);
    --sidebar-border: var(--md-sys-color-outline-variant);
    --sidebar-ring: var(--md-sys-color-primary);
  }

  .dark {
    /* Material Design 3 Dark Theme - Proper Color Tokens */
    --md-sys-color-primary: 208 188 255; /* #d0bcff */
    --md-sys-color-on-primary: 56 30 114; /* #381e72 */
    --md-sys-color-primary-container: 79 55 139; /* #4f378b */
    --md-sys-color-on-primary-container: 234 221 255; /* #eaddff */
    
    --md-sys-color-secondary: 203 194 220; /* #cbc2dc */
    --md-sys-color-on-secondary: 51 45 65; /* #332d41 */
    --md-sys-color-secondary-container: 74 68 88; /* #4a4458 */
    --md-sys-color-on-secondary-container: 231 222 248; /* #e7def8 */
    
    --md-sys-color-tertiary: 227 187 200; /* #e3bbc8 */
    --md-sys-color-on-tertiary: 80 37 50; /* #502532 */
    --md-sys-color-tertiary-container: 99 59 72; /* #633b48 */
    --md-sys-color-on-tertiary-container: 255 216 228; /* #ffd8e4 */
    
    --md-sys-color-error: 255 180 171; /* #ffb4ab */
    --md-sys-color-on-error: 105 0 5; /* #690005 */
    --md-sys-color-error-container: 147 0 10; /* #93000a */
    --md-sys-color-on-error-container: 255 218 214; /* #ffdad6 */
    
    --md-sys-color-surface: 16 16 20; /* #101014 */
    --md-sys-color-on-surface: 230 225 229; /* #e6e1e5 */
    --md-sys-color-surface-variant: 73 69 78; /* #49454f */
    --md-sys-color-on-surface-variant: 202 196 208; /* #cac4d0 */
    
    --md-sys-color-surface-container-lowest: 10 10 13; /* #0a0a0d */
    --md-sys-color-surface-container-low: 22 22 26; /* #16161a */
    --md-sys-color-surface-container: 30 29 32; /* #1e1d20 */
    --md-sys-color-surface-container-high: 40 39 43; /* #28272b */
    --md-sys-color-surface-container-highest: 49 48 51; /* #313033 */
    
    --md-sys-color-outline: 147 143 153; /* #938f99 */
    --md-sys-color-outline-variant: 73 69 78; /* #49454f */
    
    --md-sys-color-surface-tint: var(--md-sys-color-primary);
    --md-sys-color-inverse-surface: 230 225 229; /* #e6e1e5 */
    --md-sys-color-inverse-on-surface: 50 47 53; /* #322f35 */
    --md-sys-color-inverse-primary: 103 80 164; /* #6750a4 */
    
    /* Legacy mappings for compatibility */
    --background: var(--md-sys-color-surface);
    --foreground: var(--md-sys-color-on-surface);
    --primary: var(--md-sys-color-primary);
    --primary-foreground: var(--md-sys-color-on-primary);
    --secondary: var(--md-sys-color-secondary);
    --secondary-foreground: var(--md-sys-color-on-secondary);
    --muted: var(--md-sys-color-surface-variant);
    --muted-foreground: var(--md-sys-color-on-surface-variant);
    --accent: var(--md-sys-color-secondary-container);
    --accent-foreground: var(--md-sys-color-on-secondary-container);
    --destructive: var(--md-sys-color-error);
    --destructive-foreground: var(--md-sys-color-on-error);
    --border: var(--md-sys-color-outline-variant);
    --outline-variant: var(--md-sys-color-outline-variant);
    --input: var(--md-sys-color-outline);
    --ring: var(--md-sys-color-primary);
    --surface-container: var(--md-sys-color-surface-container);
    --surface-container-high: var(--md-sys-color-surface-container-high);
    --on-surface: var(--md-sys-color-on-surface);
    --on-surface-variant: var(--md-sys-color-on-surface-variant);
    --primary-container: var(--md-sys-color-primary-container);
    --on-primary-container: var(--md-sys-color-on-primary-container);
    --secondary-container: var(--md-sys-color-secondary-container);
    --on-secondary-container: var(--md-sys-color-on-secondary-container);
    --card: var(--md-sys-color-surface-container);
    --card-foreground: var(--md-sys-color-on-surface);
    --popover: var(--md-sys-color-surface-container);
    --popover-foreground: var(--md-sys-color-on-surface);

    /* Sidebar colors */
    --sidebar-background: var(--md-sys-color-surface-container);
    --sidebar-foreground: var(--md-sys-color-on-surface);
    --sidebar-primary: var(--md-sys-color-primary);
    --sidebar-primary-foreground: var(--md-sys-color-on-primary);
    --sidebar-accent: var(--md-sys-color-secondary-container);
    --sidebar-accent-foreground: var(--md-sys-color-on-secondary-container);
    --sidebar-border: var(--md-sys-color-outline-variant);
    --sidebar-ring: var(--md-sys-color-primary);
  }

  .metallic {
    /* Metallic Theme - M3 Aligned Custom Variant */
    --md-sys-color-primary: 176 190 197; /* #b0bec5 - Blue Grey 200 */
    --md-sys-color-on-primary: 38 50 56; /* #263238 - Blue Grey 800 */
    --md-sys-color-primary-container: 55 71 79; /* #37474f - Blue Grey 700 */
    --md-sys-color-on-primary-container: 207 216 220; /* #cfd8dc - Blue Grey 100 */
    
    --md-sys-color-secondary: 158 158 158; /* #9e9e9e - Grey 500 */
    --md-sys-color-on-secondary: 33 33 33; /* #212121 - Grey 900 */
    --md-sys-color-secondary-container: 69 90 100; /* #455a64 - Blue Grey 700 */
    --md-sys-color-on-secondary-container: 207 216 220; /* #cfd8dc */
    
    --md-sys-color-tertiary: 144 164 174; /* #90a4ae - Blue Grey 300 */
    --md-sys-color-on-tertiary: 38 50 56; /* #263238 */
    --md-sys-color-tertiary-container: 84 110 122; /* #546e7a - Blue Grey 600 */
    --md-sys-color-on-tertiary-container: 236 239 241; /* #eceff1 - Blue Grey 50 */
    
    --md-sys-color-error: 244 67 54; /* #f44336 - Red 500 */
    --md-sys-color-on-error: 255 255 255; /* #ffffff */
    --md-sys-color-error-container: 198 40 40; /* #c62828 - Red 800 */
    --md-sys-color-on-error-container: 255 235 238; /* #ffebee - Red 50 */
    
    --md-sys-color-surface: 33 37 41; /* #212529 - Dark surface */
    --md-sys-color-on-surface: 236 239 241; /* #eceff1 */
    --md-sys-color-surface-variant: 55 71 79; /* #37474f */
    --md-sys-color-on-surface-variant: 176 190 197; /* #b0bec5 */
    
    --md-sys-color-surface-container-lowest: 22 27 29; /* #161b1d */
    --md-sys-color-surface-container-low: 33 37 41; /* #212529 */
    --md-sys-color-surface-container: 42 48 55; /* #2a3037 */
    --md-sys-color-surface-container-high: 55 61 70; /* #373d46 */
    --md-sys-color-surface-container-highest: 66 73 84; /* #424954 */
    
    --md-sys-color-outline: 120 144 156; /* #78909c - Blue Grey 400 */
    --md-sys-color-outline-variant: 84 110 122; /* #546e7a - Blue Grey 600 */
    
    --md-sys-color-surface-tint: var(--md-sys-color-primary);
    --md-sys-color-inverse-surface: 236 239 241; /* #eceff1 */
    --md-sys-color-inverse-on-surface: 55 71 79; /* #37474f */
    --md-sys-color-inverse-primary: 38 50 56; /* #263238 */
    
    /* Legacy mappings for compatibility */
    --background: var(--md-sys-color-surface);
    --foreground: var(--md-sys-color-on-surface);
    --primary: var(--md-sys-color-primary);
    --primary-foreground: var(--md-sys-color-on-primary);
    --secondary: var(--md-sys-color-secondary);
    --secondary-foreground: var(--md-sys-color-on-secondary);
    --muted: var(--md-sys-color-surface-variant);
    --muted-foreground: var(--md-sys-color-on-surface-variant);
    --accent: var(--md-sys-color-secondary-container);
    --accent-foreground: var(--md-sys-color-on-secondary-container);
    --destructive: var(--md-sys-color-error);
    --destructive-foreground: var(--md-sys-color-on-error);
    --border: var(--md-sys-color-outline-variant);
    --outline-variant: var(--md-sys-color-outline-variant);
    --input: var(--md-sys-color-outline);
    --ring: var(--md-sys-color-primary);
    --surface-container: var(--md-sys-color-surface-container);
    --surface-container-high: var(--md-sys-color-surface-container-high);
    --on-surface: var(--md-sys-color-on-surface);
    --on-surface-variant: var(--md-sys-color-on-surface-variant);
    --primary-container: var(--md-sys-color-primary-container);
    --on-primary-container: var(--md-sys-color-on-primary-container);
    --secondary-container: var(--md-sys-color-secondary-container);
    --on-secondary-container: var(--md-sys-color-on-secondary-container);
    --card: var(--md-sys-color-surface-container);
    --card-foreground: var(--md-sys-color-on-surface);
    --popover: var(--md-sys-color-surface-container);
    --popover-foreground: var(--md-sys-color-on-surface);

    /* Sidebar colors */
    --sidebar-background: var(--md-sys-color-surface-container);
    --sidebar-foreground: var(--md-sys-color-on-surface);
    --sidebar-primary: var(--md-sys-color-primary);
    --sidebar-primary-foreground: var(--md-sys-color-on-primary);
    --sidebar-accent: var(--md-sys-color-secondary-container);
    --sidebar-accent-foreground: var(--md-sys-color-on-secondary-container);
    --sidebar-border: var(--md-sys-color-outline-variant);
    --sidebar-ring: var(--md-sys-color-primary);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html, body, #root {
    @apply h-full w-full m-0 p-0 overflow-x-hidden font-sans;
    -webkit-overflow-scrolling: touch;
    -webkit-text-size-adjust: 100%;
    -webkit-tap-highlight-color: transparent;
    font-family: 'Inter', ui-sans-serif, system-ui, sans-serif;
    font-size: max(16px, 1rem);
  }

  body {
    @apply bg-background text-foreground antialiased;
    text-rendering: optimizeLegibility;
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  input, select, textarea {
    font-size: max(16px, 1rem) !important;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border-radius: 0;
    background-clip: padding-box;
    font-family: inherit;
  }
  
  button {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border-radius: 0;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
    font-family: inherit;
  }
}

/* Material Design 3 Elevation System */
@layer utilities {
  .elevation-0 {
    box-shadow: none;
  }
  
  .elevation-1 {
    box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.3), 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
  }
  
  .elevation-2 {
    box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.3), 0px 2px 6px 2px rgba(0, 0, 0, 0.15);
  }
  
  .elevation-3 {
    box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.3), 0px 4px 8px 3px rgba(0, 0, 0, 0.15);
  }
  
  .elevation-4 {
    box-shadow: 0px 2px 3px 0px rgba(0, 0, 0, 0.3), 0px 6px 10px 4px rgba(0, 0, 0, 0.15);
  }
  
  .elevation-5 {
    box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.3), 0px 8px 12px 6px rgba(0, 0, 0, 0.15);
  }

  /* Material Ripple Effect */
  .ink-ripple {
    position: relative;
    overflow: hidden;
    transform: translateZ(0); 
  }

  .ripple-effect {
    position: absolute;
    border-radius: 50%;
    transform: scale(0);
    animation: ripple 600ms linear;
    @apply bg-white/70;
  }

  .dark .ripple-effect {
    @apply bg-black/30;
  }

  .metallic .ripple-effect {
    @apply bg-white/50;
  }

  @keyframes ripple {
    to {
      transform: scale(4);
      opacity: 0;
    }
  }

  /* Material Design 3 Surface Utilities */
  .surface-container-lowest {
    background-color: rgb(var(--md-sys-color-surface-container-lowest));
  }
  
  .surface-container-low {
    background-color: rgb(var(--md-sys-color-surface-container-low));
  }
  
  .surface-container {
    background-color: rgb(var(--md-sys-color-surface-container));
  }
  
  .surface-container-high {
    background-color: rgb(var(--md-sys-color-surface-container-high));
  }
  
  .surface-container-highest {
    background-color: rgb(var(--md-sys-color-surface-container-highest));
  }

  /* Enhanced Material Transitions */
  .material-transition {
    @apply transition-all duration-300 ease-out;
  }

  .material-transition-fast {
    @apply transition-all duration-200 ease-out;
  }

  .material-transition-slow {
    @apply transition-all duration-500 ease-out;
  }

  /* Responsive utilities */
  .responsive-container {
    @apply w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }
  
  .responsive-padding {
    @apply px-4 sm:px-6 md:px-8;
  }
  
  .responsive-grid {
    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4;
  }
  
  /* iOS Safe Area Support */
  .ios-safe-top {
    padding-top: max(env(safe-area-inset-top), 1rem);
  }
  
  .ios-safe-bottom {
    padding-bottom: max(env(safe-area-inset-bottom), 1rem);
  }
  
  .ios-safe-left {
    padding-left: max(env(safe-area-inset-left), 0px);
  }
  
  .ios-safe-right {
    padding-right: max(env(safe-area-inset-right), 0px);
  }
  
  .ios-touch-target {
    min-height: 44px;
    min-width: 44px;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  .ios-vh-fix {
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }
  
  .ios-no-bounce {
    overscroll-behavior: none;
    -webkit-overflow-scrolling: touch;
  }
  
  .ios-smooth-scroll {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }

  /* Glassmorphism effects */
  .glass-surface {
    @apply backdrop-blur-xl bg-surface-container/90 border-outline-variant/20;
  }
  
  .glass-primary {
    @apply backdrop-blur-xl bg-primary-container/80 border-primary/20;
  }

  /* Enhanced metallic theme effects */
  .metallic body,
  .metallic h1,
  .metallic h2,
  .metallic h3,
  .metallic p,
  .metallic span,
  .metallic a,
  .metallic button,
  .metallic label {
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.7);
  }

  .metallic svg {
    filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.8));
  }

  .metallic .elevation-1 {
    box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.6), 0px 1px 3px 1px rgba(0, 0, 0, 0.4);
  }
  .metallic .elevation-2 {
    box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.6), 0px 2px 6px 2px rgba(0, 0, 0, 0.4);
  }
  .metallic .elevation-3 {
    box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.6), 0px 4px 8px 3px rgba(0, 0, 0, 0.4);
  }
  .metallic .elevation-4 {
    box-shadow: 0px 2px 3px 0px rgba(0, 0, 0, 0.6), 0px 6px 10px 4px rgba(0, 0, 0, 0.4);
  }
  .metallic .elevation-5 {
    box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.6), 0px 8px 12px 6px rgba(0, 0, 0, 0.4);
  }
}

/* Platform-specific improvements */
@supports (-webkit-touch-callout: none) {
  .ios-vh-fix {
    height: 100vh;
    height: -webkit-fill-available;
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }
  
  .ios-no-bounce {
    overscroll-behavior: none;
    overscroll-behavior-y: none;
  }
  
  .ios-smooth-scroll {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }

  input, select, textarea {
    font-size: max(16px, 1rem) !important;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
}

@media screen and (max-width: 640px) {
  .bottom-nav-ios {
    padding-bottom: max(calc(env(safe-area-inset-bottom) + 0.5rem), 1rem);
  }
  
  input, select, textarea, button {
    @apply text-base ios-touch-target;
    font-size: max(16px, 1rem) !important;
  }
  
  .touch-target {
    @apply ios-touch-target;
  }
}

@media (min-width: 768px) and (max-width: 1024px) {
  .responsive-grid {
    @apply grid-cols-2 lg:grid-cols-3;
  }
  
  body {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}

@media screen and (orientation: landscape) and (max-device-width: 896px) {
  .ios-landscape-fix {
    padding-left: max(env(safe-area-inset-left), 0px);
    padding-right: max(env(safe-area-inset-right), 0px);
  }
}

/* Accessibility enhancements */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

@media (prefers-contrast: high) {
  :root {
    --md-sys-color-outline: 0 0 0;
    --md-sys-color-outline-variant: 66 66 66;
  }
  
  .dark {
    --md-sys-color-outline: 255 255 255;
    --md-sys-color-outline-variant: 189 189 189;
  }
}
